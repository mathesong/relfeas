label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ ., scales = "free_y") +
geom_text(data=groupsizes, aes(x=Inf, y=Inf,
label=label, group=ES), inherit.aes=FALSE,nudge_x = -3, nudge_y = -3)
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ ., scales = "free_y") +
geom_text(data=groupsizes, aes(x=0.75, y=Inf,
label=label, group=ES), inherit.aes=FALSE,nudge_y = -3)
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ ., scales = "free_y") +
geom_text(data=groupsizes, aes(x=0.75, y=Inf,
label=label, group=ES), inherit.aes=FALSE,nudge_y = -30)
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ ., scales = "free_y") +
geom_text(data=groupsizes, aes(x=0.85, y=0.5,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ ., scales = "free_y") +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=significant)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .)
d_revnunnally <- function(rel, d=NULL, overlap=NULL, u3=NULL, cles=NULL, n1=10, n2=n1) {
if(sum(c(is.null(overlap), is.null(u3), is.null(d), is.null(cles))) != 3) stop("Please specify only one effect size measure")
effect_sizes <- es_convert_d(d, overlap, u3, cles)
d_obs <- effect_sizes$d
a <- (n1 + n2)^2 / (n1 * n2)   # Correction factor: https://www.meta-analysis.com/downloads/Meta-analysis%20Converting%20among%20effect%20sizes.pdf
r_obs <- d_obs/sqrt(d_obs^2 + a)
r_true <- r_obs * r_revnunnally(rel)
d_true <- 2*r_true / sqrt(1-r_true^2)
return(d_true)
}
r_revnunnally <- function(...) {
r_true <- 1/sqrt(prod(...))
return(r_true)
}
lapply(iccvals, function(x) d_revnunnally(x, d=0.8))
sapply(iccvals, function(x) d_revnunnally(x, d=0.8))
d_rev_large <- sapply(iccvals, function(x) d_revnunnally(x, d=0.8))
d_rev_med <- sapply(iccvals, function(x) d_revnunnally(x, d=0.5))
d_rev_small <- sapply(iccvals, function(x) d_revnunnally(x, d=0.2))
drev_dat <- data.frame(icc = iccvals, d_rev_large = d_rev_large, d_rev_med = d_rev_med, d_rev_small = d_rev_small)
drev_dat <- data.frame(icc = iccvals, d_rev_large = d_rev_large, d_rev_med = d_rev_med, d_rev_small = d_rev_small) %>%
gather(icc)
drev_dat
drev_dat <- data.frame(icc = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(icc)
drev_dat <- data.frame(icc = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(icc)
names(drev_dat)
drev_dat <- data.frame(icc = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(icc) %>%
names(c('icc', 'ES', 'RevD'))
colnames(drev_dat) <- c('icc', 'ES', 'RevD')
ggplot(drev_dat, aes(x=icc, y=RevD)) +
geom_point() +
facet_grid(ES ~ .) +
ggplot(drev_dat, aes(x=icc, y=RevD)) +
geom_point() +
facet_grid(ES ~ .)
drev_dat <- data.frame(icc = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(icc)
colnames(drev_dat) <- c('icc', 'ES', 'RevD')
ggplot(drev_dat, aes(x=icc, y=RevD)) +
geom_point() +
facet_grid(ES ~ .)
ggplot(drev_dat, aes(x=icc, y=RevD)) +
geom_point() +
facet_grid(ES ~ .) +
ylim(c(0,2))
drev_dat <- data.frame(icc = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(icc) %>%
mutate(es_d = c(rep(0.8, length(d_rev_large)),
rep(0.5, length(d_rev_large)),
rep(0.2, length(d_rev_large))))
drev_dat <- data.frame(icc = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(icc) %>%
mutate(es_d = c(rep(0.8, length(d_rev_large)),
rep(0.5, length(d_rev_large)),
rep(0.2, length(d_rev_large))))
d_rev_large <- sapply(iccvals, function(x) d_revnunnally(x, d=0.8))
d_rev_med <- sapply(iccvals, function(x) d_revnunnally(x, d=0.5))
d_rev_small <- sapply(iccvals, function(x) d_revnunnally(x, d=0.2))
drev_dat <- data.frame(icc = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(icc)
d_rev_large <- sapply(iccvals, function(x) d_revnunnally(x, d=0.8))
d_rev_med <- sapply(iccvals, function(x) d_revnunnally(x, d=0.5))
d_rev_small <- sapply(iccvals, function(x) d_revnunnally(x, d=0.2))
drev_dat <- data.frame(icc = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(icc) %>%
mutate(es_d = c(rep(0.8, length(d_rev_large)),
rep(0.5, length(d_rev_large)),
rep(0.2, length(d_rev_large))))
data.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(icc)
ddata.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(iccval)
data.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(iccval)
data.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(iccval, key = 'ES')
drev_dat <- data.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(iccval, key = 'ES') %>%
mutate(es_d = c(rep(0.8, length(d_rev_large)),
rep(0.5, length(d_rev_large)),
rep(0.2, length(d_rev_large))))
drev_dat <- data.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(iccval, key = 'ES', value = 'RevD') %>%
mutate(es_d = c(rep(0.8, length(d_rev_large)),
rep(0.5, length(d_rev_large)),
rep(0.2, length(d_rev_large))))
data.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(iccval, key = 'ES', value = 'RevD')
data.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(iccval, key = 'ES')
drev_dat <- data.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(iccval)
colnames(drev_dat) <- c('icc', 'ES', 'RevD')
mutate(drev_dat, es_d = c(rep(0.8, length(d_rev_large)),
rep(0.5, length(d_rev_large)),
rep(0.2, length(d_rev_large))))
ggplot(drev_dat, aes(x=icc, y=RevD)) +
geom_point() +
facet_grid(ES ~ .) +
ylim(c(0,2))
drev_dat <- mutate(drev_dat, es_d = c(rep(0.8, length(d_rev_large)),
rep(0.5, length(d_rev_large)),
rep(0.2, length(d_rev_large))))
ggplot(drev_dat, aes(x=icc, y=RevD)) +
geom_point() +
facet_grid(ES ~ .) +
ylim(c(0,2))
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=significant)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=significant)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.3,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=significant)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.4,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=significant)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.45,
label=label, group=ES), inherit.aes=FALSE)
library(effsize)
ntests <- 100
iccvals <- seq(0.01, 0.99, length.out = 99)
semvals <- icc2sem(iccvals, 1)
do_testing <- function(iccval, es) {
sem <- icc2sem(iccval, 1)
meas_sd <- sqrt(1 + sem^2)
pwr_n <- pwr::pwr.t.test(d=es, power=0.8)
sign = vector(length = ntests)
nval = vector(length = ntests)
dval = vector(length = ntests)
for (i in 1:ntests){
group1 <- rnorm(round(pwr_n$n),mean_true,1)
error1 <- rnorm(round(pwr_n$n),0,sem)
group1 <- group1 + error1
group2 <- rnorm(round(pwr_n$n),mean_true+meas_sd,1)
error2 <- rnorm(round(pwr_n$n),0,sem)
group2 <- group2 + error2
get.p <- t.test(group1,group2)
sign[i] <- ifelse( mean(group1) < mean(group2), 1, 0)
count.p[i] <- get.p$p.value
dval[i] <- effsize::cohen.d(group1, group2)$estimate
}
nval <- pwr::pwr.t.test(d=es, power=0.8)$n
cov_d <- sd(dval) / abs(mean(dval))
perc_significant <- mean( ifelse( count.p<0.05, 1, 0))
perc_rightsign <- mean( ifelse( count.p<0.05, 1, 0))
out <- list(icc=iccval, nval=pwr_n$n, sign = sign, pcount = count.p, dval = dval, cov_d = cov_d, perc_signif = perc_significant, perc_rightsign=perc_rightsign)
return(out)
}
dvals_large <- lapply(iccvals, function(x) do_testing(x, 0.8) )
dvals_med <- lapply(iccvals, function(x) do_testing(x, 0.5) )
dvals_small <- lapply(iccvals, function(x) do_testing(x, 0.2) )
large_data <- tibble(
iccval = map_dbl(dvals_large, 'icc'),
n = map_dbl(dvals_large, 'nval'),
cov_d = map_dbl(dvals_large, 'cov_d'),
s_correct = map_dbl(dvals_large, 'perc_rightsign'),
significant = map_dbl(dvals_large, 'perc_signif'),
ES = 'Large')
med_data <- tibble(
iccval = map_dbl(dvals_med, 'icc'),
n = map_dbl(dvals_med, 'nval'),
cov_d = map_dbl(dvals_med, 'cov_d'),
s_correct = map_dbl(dvals_med, 'perc_rightsign'),
significant = map_dbl(dvals_med, 'perc_signif'),
ES = 'Medium')
small_data <- tibble(
iccval = map_dbl(dvals_small, 'icc'),
n = map_dbl(dvals_small, 'nval'),
cov_d = map_dbl(dvals_small, 'cov_d'),
s_correct = map_dbl(dvals_small, 'perc_rightsign'),
significant = map_dbl(dvals_small, 'perc_signif'),
ES = 'Small')
alldata <- bind_rows(large_data, med_data, small_data)
groupsizes <- alldata %>%
group_by(ES) %>%
summarise(n=mean(n)) %>%
mutate(label = paste0('n = ', round(n)))
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=significant)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.45,
label=label, group=ES), inherit.aes=FALSE)
d_revnunnally <- function(rel, d=NULL, overlap=NULL, u3=NULL, cles=NULL, n1=10, n2=n1) {
if(sum(c(is.null(overlap), is.null(u3), is.null(d), is.null(cles))) != 3) stop("Please specify only one effect size measure")
effect_sizes <- es_convert_d(d, overlap, u3, cles)
d_obs <- effect_sizes$d
a <- (n1 + n2)^2 / (n1 * n2)   # Correction factor: https://www.meta-analysis.com/downloads/Meta-analysis%20Converting%20among%20effect%20sizes.pdf
r_obs <- d_obs/sqrt(d_obs^2 + a)
r_true <- r_obs * r_revnunnally(rel)
d_true <- 2*r_true / sqrt(1-r_true^2)
return(d_true)
}
r_revnunnally <- function(...) {
r_true <- 1/sqrt(prod(...))
return(r_true)
}
d_rev_large <- sapply(iccvals, function(x) d_revnunnally(x, d=0.8))
d_rev_med <- sapply(iccvals, function(x) d_revnunnally(x, d=0.5))
d_rev_small <- sapply(iccvals, function(x) d_revnunnally(x, d=0.2))
drev_dat <- data.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(iccval)
colnames(drev_dat) <- c('icc', 'ES', 'RevD')
drev_dat <- mutate(drev_dat, es_d = c(rep(0.8, length(d_rev_large)),
rep(0.5, length(d_rev_large)),
rep(0.2, length(d_rev_large))))
ggplot(drev_dat, aes(x=icc, y=RevD)) +
geom_point() +
facet_grid(ES ~ .) +
ylim(c(0,2))
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=significant)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.45,
label=label, group=ES), inherit.aes=FALSE)
sqrt(1 + sem^2)
sem <- icc2sem(iccval, 1)
ggplot(alldata, aes(x=iccval, y=significant)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.45,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
library(effsize)
ntests <- 100
iccvals <- seq(0.01, 0.99, length.out = 99)
semvals <- icc2sem(iccvals, 1)
do_testing <- function(iccval, es) {
sem <- icc2sem(iccval, 1)
meas_sd <- sqrt(1 + sem^2)
pwr_n <- pwr::pwr.t.test(d=es, power=0.8)
sign = vector(length = ntests)
nval = vector(length = ntests)
dval = vector(length = ntests)
for (i in 1:ntests){
group1 <- rnorm(round(pwr_n$n),mean_true,1)
error1 <- rnorm(round(pwr_n$n),0,sem)
group1 <- group1 + error1
group2 <- rnorm(round(pwr_n$n),mean_true+es,1)
error2 <- rnorm(round(pwr_n$n),0,sem)
group2 <- group2 + error2
get.p <- t.test(group1,group2)
sign[i] <- ifelse( mean(group1) < mean(group2), 1, 0)
count.p[i] <- get.p$p.value
dval[i] <- effsize::cohen.d(group1, group2)$estimate
}
nval <- pwr::pwr.t.test(d=es, power=0.8)$n
cov_d <- sd(dval) / abs(mean(dval))
perc_significant <- mean( ifelse( count.p<0.05, 1, 0))
perc_rightsign <- mean( ifelse( count.p<0.05, 1, 0))
out <- list(icc=iccval, nval=pwr_n$n, sign = sign, pcount = count.p, dval = dval, cov_d = cov_d, perc_signif = perc_significant, perc_rightsign=perc_rightsign)
return(out)
}
dvals_large <- lapply(iccvals, function(x) do_testing(x, 0.8) )
dvals_med <- lapply(iccvals, function(x) do_testing(x, 0.5) )
dvals_small <- lapply(iccvals, function(x) do_testing(x, 0.2) )
large_data <- tibble(
iccval = map_dbl(dvals_large, 'icc'),
n = map_dbl(dvals_large, 'nval'),
cov_d = map_dbl(dvals_large, 'cov_d'),
s_correct = map_dbl(dvals_large, 'perc_rightsign'),
significant = map_dbl(dvals_large, 'perc_signif'),
ES = 'Large')
med_data <- tibble(
iccval = map_dbl(dvals_med, 'icc'),
n = map_dbl(dvals_med, 'nval'),
cov_d = map_dbl(dvals_med, 'cov_d'),
s_correct = map_dbl(dvals_med, 'perc_rightsign'),
significant = map_dbl(dvals_med, 'perc_signif'),
ES = 'Medium')
small_data <- tibble(
iccval = map_dbl(dvals_small, 'icc'),
n = map_dbl(dvals_small, 'nval'),
cov_d = map_dbl(dvals_small, 'cov_d'),
s_correct = map_dbl(dvals_small, 'perc_rightsign'),
significant = map_dbl(dvals_small, 'perc_signif'),
ES = 'Small')
alldata <- bind_rows(large_data, med_data, small_data)
groupsizes <- alldata %>%
group_by(ES) %>%
summarise(n=mean(n)) %>%
mutate(label = paste0('n = ', round(n)))
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=significant)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.45,
label=label, group=ES), inherit.aes=FALSE)
d_revnunnally <- function(rel, d=NULL, overlap=NULL, u3=NULL, cles=NULL, n1=10, n2=n1) {
if(sum(c(is.null(overlap), is.null(u3), is.null(d), is.null(cles))) != 3) stop("Please specify only one effect size measure")
effect_sizes <- es_convert_d(d, overlap, u3, cles)
d_obs <- effect_sizes$d
a <- (n1 + n2)^2 / (n1 * n2)   # Correction factor: https://www.meta-analysis.com/downloads/Meta-analysis%20Converting%20among%20effect%20sizes.pdf
r_obs <- d_obs/sqrt(d_obs^2 + a)
r_true <- r_obs * r_revnunnally(rel)
d_true <- 2*r_true / sqrt(1-r_true^2)
return(d_true)
}
r_revnunnally <- function(...) {
r_true <- 1/sqrt(prod(...))
return(r_true)
}
d_rev_large <- sapply(iccvals, function(x) d_revnunnally(x, d=0.8))
d_rev_med <- sapply(iccvals, function(x) d_revnunnally(x, d=0.5))
d_rev_small <- sapply(iccvals, function(x) d_revnunnally(x, d=0.2))
drev_dat <- data.frame(iccval = iccvals, Large = d_rev_large, Medium = d_rev_med, Small = d_rev_small) %>%
gather(iccval)
colnames(drev_dat) <- c('icc', 'ES', 'RevD')
drev_dat <- mutate(drev_dat, es_d = c(rep(0.8, length(d_rev_large)),
rep(0.5, length(d_rev_large)),
rep(0.2, length(d_rev_large))))
ggplot(drev_dat, aes(x=icc, y=RevD)) +
geom_point() +
facet_grid(ES ~ .) +
ylim(c(0,2))
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=significant)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.45,
label=label, group=ES), inherit.aes=FALSE)
ggplot(alldata, aes(x=iccval, y=cov_d)) +
geom_point() + geom_smooth(method="lm") +
facet_grid(ES ~ .) +
geom_text(data=groupsizes, aes(x=0.85, y=0.55,
label=label, group=ES), inherit.aes=FALSE)
d_nunnally(0.5, 1)
devtools::install()
r_nunnally(0.5)
r_nunnally(0.5, 0.5)
d_nunnally(0.5, 2)
plot_difference(u3=.0.9)
plot_difference(u3=0.9)
d_nunnally(0.5, u3 = 0.9)
u32d(u3 = 0.9)
d_nunnally(0.5, 1)
d_nunnally(0.5, 2)
d_nunnally(0.5, 3)
d_nunnally(0.5, 0.5)
samplesize <- 10
md_indiv <- 100*((sem*1.96*sqrt(2))/meanbp)
meanbp <- 1.91
delta_mean <- 0.12
delta_sd <- 0.1
sem <- icc2sem(0.8, 0.22)
sd = delta_sd*(meanbp)
delta_icc <- sem2icc(sem*2, sd)
samplesize <- 10
md_indiv <- 100*((sem*1.96*sqrt(2))/meanbp)
md_group <- 100*(((sem/sqrt(samplesize))*1.96*sqrt(2))/meanbp)
md_group
pwr::pwr.t.test(10, (0.045*1.91)/delta_sd*(meanbp), power = 0.8, type = 'paired')
pwr::pwr.t.test(10, (0.045*1.91)/delta_sd*(meanbp), type = 'paired')
0.045*1.91
delta_sd*(meanbp)
(0.045*1.91)/delta_sd*(meanbp)
(0.045*1.91)/(delta_sd*(meanbp))
pwr::pwr.t.test(10, (0.045*1.91)/(delta_sd*(meanbp)), type = 'paired')
rel_total = NULL
rel_onegroup = NULL
sum(c(is.null(rel_total), is.null(rel_onegroup)))
sum(c(is.null(rel_total), is.null(rel_onegroup))) != 1
source('~/Repositories/relfeas/R/power.R')
n1= 10
d =
1
n2=n1
effect_sizes <- es_convert_d(d=1)
ss_total <- sumStat_total(n1 = n1, mean1 = 0, sd1 = 1, n2 = n2, sd2 = 1, d = effect_sizes$d)
ss_total
semval <- icc2sem(rel_onegroup, sd=1)
rel_onegroup = 0.3
semval <- icc2sem(rel_onegroup, sd=1)
semval
source('~/Repositories/relfeas/R/power.R')
semval <- icc2sem(rel_onegroup, sd=1)
ss_total <- sumStat_total(n1 = n1, mean1 = 0, sd1 = 1, n2 = n2, sd2 = 1, d = effect_sizes$d)
sd_total <- sqrt(ss_total$sd_total^2 + semval^2)
source('~/Repositories/relfeas/R/power.R')
rel_onegroup = 0.5
semval <- icc2sem(rel_onegroup, sd=1)
semval
ss_total <- sumStat_total(n1 = n1, mean1 = 0, sd1 = 1, n2 = n2, sd2 = 1, d = effect_sizes$d)
sd_total <- sqrt(ss_total$sd_total^2 + semval^2)
sd_original <- sqrt(ss_total$sd_total^2 + semval^2)
rel_total <- sd2extrapRel(sd = sd_total, icc_original = rel_onegroup, sd_original = sd_original)
rel_total
rel_onegroup
effect_sizes$d
semval <- icc2sem(rel_onegroup, sd=1)
semval
ss_total <- sumStat_total(n1 = n1, mean1 = 0, sd1 = 1, n2 = n2, sd2 = 1, d = effect_sizes$d)
ss_total$sd_total^2
semval^2
sqrt(ss_total$sd_total^2 + semval^2)
sd_original <- sqrt(1 + semval^2)
sd_original
semval <- icc2sem(rel_onegroup, sd=1)
ss_total <- sumStat_total(n1 = n1, mean1 = 0, sd1 = 1, n2 = n2, sd2 = 1, d = effect_sizes$d)
sd_total <- sqrt(ss_total$sd_total^2 + semval^2)
sd_original <- sqrt(1 + semval^2)
rel_total <- sd2extrapRel(sd = sd_total, icc_original = rel_onegroup, sd_original = sd_original)
rel_total
icc2sem(c(0.7, 0.7), sd=1)
icc2sem(c(0.7, 0.6), sd=1)
source('~/Repositories/relfeas/R/power.R')
rel_onegroup
rel_onegroup <- c(0.5, 0.5)
( r_nunnally(rel_onegroup) )^2
r_nunnally(rel_onegroup)
sqrt( r_nunnally(rel_onegroup) )
r_nunnally(rel_onegroup)
prod(rel_onegroup)
source('~/Repositories/relfeas/R/power.R')
d_nunnally(rel_onegroup = 0.5, d = 1.4)
d_nunnally(rel_total = 0.5, d = 1.4)
r_nunnally(0.5)
r_nunnally(0.5, 0.5)
r_nunnally(0.25)
0.5*0.5
source('~/Repositories/relfeas/R/power.R')
source('~/Repositories/relfeas/R/power.R')
source('~/Repositories/relfeas/R/power.R')
source('~/Repositories/relfeas/R/trt.R')
devtools::document()
usethis::use_package('psych')
source('~/Repositories/relfeas/R/trt.R')
source('~/Repositories/relfeas/R/trt.R')
devtools::document()
usethis::use_package('dplyr')
d_nunnally(rel_total = 0.7, cles=0.9)
d_nunnally(rel_total = 0.7, u3=0.9)
d_nunnally(rel_onegroup = 0.7, u3=0.9)
source('~/Repositories/relfeas/R/power.R')
devtools::document()
